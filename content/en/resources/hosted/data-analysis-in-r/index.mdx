---
title: Data analysis in R
locale: en
publication-date: 2025-07-08
version: 1.0.0
authors:
  - buschenhenke-floor
editors: []
contributors: []
tags:
  - data-visualisation
  - corpus-analysis
sources:
  - dariah
license: cc-by-4.0
table-of-contents: true
summary:
  content: >-
    Using the reader survey R package LitRiddle, this resource offers a gentle
    introduction to tabular data analysis in Rstudio. Following along the code
    examples, students will learn about Rstudio, Markdown files, and how to
    explore, analyse and transform quantitative data in R.
content-type: training-module
translations: []
---
## Introduction

This tutorial demonstrates the building blocks of quantitative data analysis in the programming language R. We will introduce Rstudio, a free programme (IDE) in which you can create and run R scripts. The dataset we will explore comes from the Dutch National Readers' Survey, in which readers' judgements on 401 novels were captured. This dataset is wrapped in an R package called [LitRiddle](https://www.rdocumentation.org/packages/litRiddle/versions/1.0.0).

To make the most of this tutorial, I encourage you to first download R and Rstudio, and then open this file **(rmd) \{add link} in Rstu**dio. That way, you can try out the code for yourself, work through the exercises and modify the code when you take the next step of applying your new knowledge to your own data and your own research questions.

## Learning outcomes

After working through this course, students:

* Can find their way around the main functionalities of Rstudio.
* Are able to create R markdown files, understand their components, and export them.
* Can perform the basic steps of quantitative data analysis in Rstudio, making use of the Tidyverse syntax. By adjusting the code supplied, they can work on their own materials. They can import datasets, inspect their data, create a plot, select information, add new columns to a table, understand ifelse statements, and group and summarise their data.
* Are familiar with the LitRiddle dataset, which contains Dutch readers' assessments of the (literary) quality of 401 popular Dutch and international novels.

  ---

## Tools and resources

You can download and install R and Rstudio (in that order!) from:

[https://posit.co/download/rstudio-desktop/](https://posit.co/download/rstudio-desktop/)

You can download the tutorial file f**rom: xxx  a**nd open it with Rstudio. The text is identical to this webpage. You can also read through the steps below, **but the code samples are not executable.**&#x20;

> The code output is given below the code blocks, though, marked like this, with a black bar in front.

## Getting started with Rstudio & R markdown

[Tutorial on Rstudio]([https://docs.posit.co/ide/user/]\(https://docs.posit.co/ide/user/\))

[Overview]([https://docs.posit.co/ide/user/ide/guide/ui/ui-panes.html]\(https://docs.posit.co/ide/user/ide/guide/ui/ui-panes.html\)) of the four base elements of the User Interface.&#x20;

[Executing code]([https://docs.posit.co/ide/user/ide/guide/code/execution.html]\(https://docs.posit.co/ide/user/ide/guide/code/execution.html\))

### R Markdown files

Many different types of files can be created in Rstudio, even *gasp* Python files. The handy filetype we will work with is .Rmd, an R Markdown file. Markdown files combine text and code, allowing you to integrate the code output, such as a graph or a table, with your report. The advantage here is that others can see both your analyses and the computational steps you took to create your output. Markdown files can be exported into various formats (pdf, Word, html), for easy sharing with others. Before exporting, you can also customize which parts of the document to show or keep hidden. For example, you can hide your code blocks, but keep their output.&#x20;

Let's check out some functions of a Markdown file. When you have this file open in Rstudio, you will notice at the left top the options 'Source' and 'Visual' mode. The source mode reveals the code used for text layout. The visual mode is easier to use for now.&#x20;

Then, at the right-hand side of the document, you see a menu item called 'Outline'- it is handy to keep that one active, to better navigate the file.

Under the 'Knit' menu, you will find the export options.&#x20;

You can add code blocks through the shortcut Ctrl-Alt-I or through the green square with the C.&#x20;

In this tutorial, you will find several exercises, where you are asked to adjust and write your own code. Correct answers to these exercises are to be found near the end of this document. (There are many ways to correctly solve the exercises though.)

## The Riddle project - exploring literary quality

It is time to run our first code. In the code block below, you see lines with # in front of them as well as black text. The # 'comments' a line; basically treating it like text instead of code. You can easily comment and uncomment lines through placement of the hashtags. In the .rmd file, you can run a code block through pressing the green 'play' button on the top right, or through placing your cursor somewhere in the block and pressing Ctrl-Enter. The output of your code will show up directly underneath the code block.&#x20;

```R
{r installing the packages}

# these top two lines only need to be run once, you can put a # in front of the line to 
# deactivate the code 
install.packages('litRiddle')
install.packages("tidyverse")

# here the packages are loaded into your workspace. These lines need to be run every time you're working with these packages.

library(litRiddle)
library(tidyverse)

```

Now we have access to the dataset of the [Riddle of Literary Quality](https://literaryquality.huygens.knaw.nl/) project. This project investigated literariness by examining both readerly assessments of general and literary quality, as well as textual characteristics, for a corpus of 401 books: both original Dutch and translated works, in several genres of fiction (romance, suspense, literary fiction and other). 13.541 respondents have shared their opinions. Together, they provided 448.055 book reviews. Allthough, due to copyright concerns, the full texts of the novels are not available, the dataset does include word frequencies for the 5000 most frequent words, for each book, unlocking stylometric analyses for this corpus.&#x20;

**A selection of publications from the Riddle-project**

Van Dalen-Oskam, K. (2023). *The Riddle of Literary Quality: A Computational Approach*. Amsterdam University Press. [https://library.oapen.org/handle/20.500.12657/63705](https://library.oapen.org/handle/20.500.12657/63705)

Corina Koolen, Karina van Dalen-Oskam, Andreas van Cranenburgh, Erica Nagelhout (2020). Literary quality in the eye of the Dutch reader: The National Reader Survey. *Poetics* 79: 101439, [https://doi.org/10.1016/j.poetic.2020.101439](https://doi.org/10.1016/j.poetic.2020.101439).

Corina Koolen (2018). *Reading beyond the female. The relationship between perception of author gender and literary quality*. [PhD thesis](http://hdl.handle.net/11245.1/cb936704-8215-4f47-9013-0d43d37f1ce7) University of Amsterdam

Andreas van Cranenburgh (2016). *Rich statistical parsing and literary language*. [PhD thesis](http://hdl.handle.net/11245/1.543163) University of Amsterdam ([revised version](http://andreasvc.github.io/phdthesis_v1.1.pdf); [errata](http://andreasvc.github.io/phderrata.txt)).

## The litRiddle package

You can read about the data of the litRiddle-package by running the code block below. In Rstudio, the introduction to the package will then open to your right side, in the 'Help' tab. Here you can find out about the three combinable tables of reader survey data, as well as some helpful code snippets to get you started with exploring this dataset. You are free to use this dataset for your own research, but please include a reference to the package. The vignette includes citation information.&#x20;

```R
 {r accessing the readme of litriddle }
vignette('litRiddle')
```

## The wonderful world of Tidyverse

The other package that is loaded is called Tidyverse. It can help with all steps of data analysis, from loading and cleaning your data to visualising it in graphs and charts. If you would like to learn more about tidyverse, and the data philosophy behind it, this is the manual:

[https://r4ds.hadley.nz/](https://r4ds.hadley.nz/)

'Base' R can do lots of the things the Tidyverse can do too, but the Tidyverse functions are more intuitive and user-friendly.

Usually, the first step would be loading your data in the working directory, so that Rstudio can access it. Now, as we will work with the data from the litRiddle package, we can do this through the code below - it works a bit differently when you have your own files to work with. The second step would be inspection and cleaning - as this data is already in mint condition, we will also skip the cleaning. So let's check out the data!

## Data inspection

```R
{r using summary and glimpse}
data(books)
# data loads the table in the working environment

# glimpse is a way to quickly see the structure of the table, it's showing column names vertically at the left side. (It transposes the data for the sake of easier reading.) 
# especially for large files, either head() or glimpse is faster than view() as the latter will open the entire table.  

glimpse(books)
```

> ```R
> Rows: 401
> Columns: 25
> $ short.title              <fct> Rosnay_HaarNaamWas, Zwagerman_Duel, Blum_Familieportret, Abdolah_…
> $ author                   <fct> "Rosnay, Tatiana de", "Zwagerman, Joost", "Blum, Jenna", "Abdolah…
> $ title                    <fct> "Haar naam was Sarah", "Duel", "Het Familieportret", "De kraai", …
> $ title.english            <fct> "Sarah's Key", "*Duel", "Those Who Save Us", "*The Crow", "The Gi…
> $ genre                    <fct> Fiction, Fiction, Fiction, Fiction, Suspense, Fiction, Other, Sus…
> $ book.id                  <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19…
> $ riddle.code              <fct> "301-302 (VERTAALDE) LITERAIRE ROMAN", "301-302 (VERTAALDE) LITER…
> $ riddle.code.english      <fct> "301 Literary novel / 302 translated literary novel", "301 Litera…
> $ translated               <fct> yes, no, yes, no, yes, no, yes, yes, no, yes, no, no, no, no, yes…
> $ gender.author            <fct> female, male, female, male, male, male, female, male, male, male,…
> $ origin.author            <fct> FR, NL, US, NL, SE, NL, UK, SE, NL, SE, NL, NL, NL, NL, US, NL, N…
> $ original.language        <fct> EN, NL, EN, NL, SE, NL, EN, SE, NL, SE, NL, NL, NL, NL, EN, NL, N…
> $ inclusion.criterion      <fct> bestseller, boekenweekgeschenk, bestseller, boekenweekgeschenk, b…
> $ publication.date         <date> 2008-10-06, 2010-03-15, 2010-09-27, 2011-03-14, 2008-10-06, 2012…
> $ first.print              <int> 2007, 2010, 2010, 2011, 2008, 2012, 2012, 2008, 2013, 2008, 2010,…
> $ publisher                <fct> "Artemis & Co", "Arbeiderspers, B.V. Uitgever De", "Samenw. uitge…
> $ word.count               <int> 87696, 32142, 140241, 23353, 181273, 23850, 162162, 219627, 24017…
> $ type.count               <int> 6512, 5178, 10298, 3147, 11473, 4694, 8439, 11618, 4914, 11845, 1…
> $ sentence.length.mean     <dbl> 9.2205, 11.8213, 11.2211, 11.2871, 12.1423, 10.7336, 8.1979, 10.8…
> $ sentence.length.variance <dbl> 7.0037, 9.4496, 8.9511, 7.2490, 9.0112, 8.1668, 6.2025, 8.2273, 1…
> $ paragraph.count          <int> 2488, 738, 3149, 882, 5214, 413, 7526, 8577, 808, 6553, 2304, 206…
> $ sentence.count           <int> 9511, 2719, 12498, 2069, 14929, 2222, 19781, 20213, 1655, 17488, …
> $ paragraph.length.mean    <dbl> 35.2476, 43.5528, 44.5351, 26.4773, 34.7666, 57.7482, 21.5469, 25…
> $ raw.TTR                  <dbl> 0.0743, 0.1611, 0.0734, 0.1348, 0.0633, 0.1968, 0.0520, 0.0529, 0…
> $ sampled.TTR              <dbl> 0.2529, 0.3023, 0.2775, 0.2527, 0.2602, 0.3041, 0.2461, 0.3012, 0…
> ```

```R
{r summarise a table }

#summary is a base R function, so you don't need special packages for this one
summary(books)


```

> ```R
>                           short.title                    author                title    
>  Abdolah_Koning                 :  1   Hollander, Loes den  : 13    De affaire    :  3  
>  Abdolah_Kraai                  :  1   Baldacci, David      : 11    1 Fifth Avenue:  1  
>  Adler-Olsen_Bedrijfsterrorist  :  1   Läckberg, Camilla    :  9   13 uur        :  1  
>  Adler-Olsen_Dossier64          :  1   Vermeer, Suzanne     :  9    1953          :  1  
>  Adler-Olsen_Fazantenmoordenaars:  1   Slaughter, Karin     :  7    1q84          :  1  
>  Adler-Olsen_NoodkreetInFles    :  1   Vlugt, Simone van der:  7    22/11/63      :  1  
>  (Other)                        :395   (Other)              :345    (Other)       :393  
>                  title.english      genre        book.id   
>  *The Neighbour         :  2   Fiction :147   Min.   :  1  
>  The Affair             :  2   Other   : 27   1st Qu.:101  
>  *1953                  :  1   Romantic: 41   Median :201  
>  *A Breeze              :  1   Suspense:186   Mean   :201  
>  *A Carpet of Shards    :  1                  3rd Qu.:301  
>  *A Corpse in the Closet:  1                  Max.   :401  
>  (Other)                :393                               
>                               riddle.code 
>  301-302 (VERTAALDE) LITERAIRE ROMAN:150  
>  305 LITERAIRE THRILLER             :111  
>  332 THRILLER                       : 55  
>  Humoristisch-Romantisch*           : 23  
>  Andere*                            : 20  
>  Romantisch*                        : 17  
>  (Other)                            : 25  
>                                          riddle.code.english translated          gender.author
>  301 Literary novel / 302 translated literary novel:150      no :152    female          :196  
>  305 Literary thriller                             :111      yes:249    male            :192  
>  332 Thriller                                      : 55                 unknown/multiple: 13  
>  Humoristic-romantic                               : 23                                       
>  Other                                             : 20                                       
>  Romantic                                          : 17                                       
>  (Other)                                           : 25                                       
>  origin.author original.language         inclusion.criterion publication.date      first.print  
>  NL     :150   EN     :180       bestseller        :364      Min.   :2007-06-04   Min.   :1983  
>  US     :104   NL     :152       boekenweekgeschenk:  4      1st Qu.:2010-03-01   1st Qu.:2009  
>  UK     : 67   SE     : 27       library           : 19      Median :2010-09-27   Median :2010  
>  SE     : 27   IT     :  7       literair_juweeltje: 14      Mean   :2010-09-25   Mean   :2010  
>  FR     :  7   SP     :  7                                   3rd Qu.:2011-06-27   3rd Qu.:2011  
>  IT     :  7   DK     :  6                                   Max.   :2013-03-18   Max.   :2013  
>  (Other): 39   (Other): 22                                                                      
>                                     publisher     word.count       type.count   
>  Bruna Uitgevers B.V., A.W.              : 55   Min.   :  6362   Min.   : 1319  
>  Bezige Bij b.v., Uitgeverij De          : 48   1st Qu.: 72588   1st Qu.: 5811  
>  Ambo/Anthos B.V.                        : 44   Median :107790   Median : 7353  
>  Samenw. uitgeverijen Meulenhoff Boekerij: 28   Mean   :109052   Mean   : 7542  
>  House of Books B.V., The                : 27   3rd Qu.:138471   3rd Qu.: 9169  
>  Luitingh-Sijthoff B.V., Uitgeverij      : 25   Max.   :354628   Max.   :17243  
>  (Other)                                 :174                                   
>  sentence.length.mean sentence.length.variance paragraph.count sentence.count 
>  Min.   : 6.668       Min.   : 3.672           Min.   :   75   Min.   :  511  
>  1st Qu.: 9.636       1st Qu.: 6.951           1st Qu.: 1967   1st Qu.: 6737  
>  Median :10.853       Median : 7.949           Median : 2946   Median : 9683  
>  Mean   :11.198       Mean   : 8.297           Mean   : 3254   Mean   : 9919  
>  3rd Qu.:12.273       3rd Qu.: 9.111           3rd Qu.: 4279   3rd Qu.:12708  
>  Max.   :20.890       Max.   :18.273           Max.   :11933   Max.   :34436  
>                                                                               
>  paragraph.length.mean    raw.TTR         sampled.TTR    
>  Min.   :  7.07        Min.   :0.02960   Min.   :0.1838  
>  1st Qu.: 28.73        1st Qu.:0.06050   1st Qu.:0.2365  
>  Median : 34.61        Median :0.07010   Median :0.2525  
>  Mean   : 38.03        Mean   :0.08162   Mean   :0.2548  
>  3rd Qu.: 43.22        3rd Qu.:0.08740   3rd Qu.:0.2724  
>  Max.   :228.25        Max.   :0.26200   Max.   :0.3704  
> ```

For less than super-tidy data, the summary would tell you how many NA's (missing values) there were, as well as if your columns are of the right data type (integer (whole number), double (number like 3.5) characters, time/date). You can also use it to check if the values are as would be expected.

The general concept of a 'tidy' table is that each row is a unique observation, and each column is a variable. This is also the case for the three tables in the Riddle package.

```R
{r tableviewing}
#head shows the first rows
head(books)
```

> Description:df \[6 × 25]
>
> |   | short.title               | author             | title                    | title.english                   |
> | - | ------------------------- | ------------------ | ------------------------ | ------------------------------- |
> | 1 | Rosnay\_HaarNaamWas       | Rosnay, Tatiana de | Haar naam was Sarah      | Sarah's Key                     |
> | 2 | Zwagerman\_Duel           | Zwagerman, Joost   | Duel                     | \*Duel                          |
> | 3 | Blum\_Familieportret      | Blum, Jenna        | Het Familieportret       | Those Who Save Us               |
> | 4 | Abdolah\_Kraai            | Abdolah, Kader     | De kraai                 | \*The Crow                      |
> | 5 | Larsson\_MannenDieVrouwen | Larsson, Stieg     | Mannen die vrouwen haten | The Girl with the Dragon Tattoo |
> | 6 | Lanoye\_HeldereHemel      | Lanoye, Tom        | Heldere hemel            | \*Clear Sky                     |
>
> 6 rows | 1-5 of 25 columns

If you have forgotten the variable names, the code below is very convenient.

```R
{r column names}
names(books)
```

> ```R
>  [1] "short.title"              "author"                   "title"                   
>  [4] "title.english"            "genre"                    "book.id"                 
>  [7] "riddle.code"              "riddle.code.english"      "translated"              
> [10] "gender.author"            "origin.author"            "original.language"       
> [13] "inclusion.criterion"      "publication.date"         "first.print"             
> [16] "publisher"                "word.count"               "type.count"              
> [19] "sentence.length.mean"     "sentence.length.variance" "paragraph.count"         
> [22] "sentence.count"           "paragraph.length.mean"    "raw.TTR"                 
> [25] "sampled.TTR"             
> ```

Apart from 'books', the tables 'respondents' and 'reviews' are also present. Pick one and activate it, then check the contents using one of the methods above - by writing your code in this next code block.&#x20;

```R
{r excercise 1: data loading and inspecting}

data(reviews)
head(reviews)
```

## Exploring through plots

There are translated and Dutch books in the corpus, and there is also a column indicating the original language. Let's create a plot that shows us how many books are written in each of these languages. The plot is built using 'ggplot', which is part of the tidyverse. It is highly adaptable, but we will keep it simple for now. Here is a cheatsheet with most of the plotting options: [https://github.com/rstudio/cheatsheets/blob/main/data-visualization.pdf](https://github.com/rstudio/cheatsheets/blob/main/data-visualization.pdf)

```R
{r bar plot for original language}

ggplot(books)+
  # a bar_plot counts the number of occurences
  # the structure is (aes(variable X, variable Y, other properties))
  geom_bar(aes(original.language))
```

> ![A bar plot with the original language on the X, and the count of books on the Y. Dutch and English are the dominant two languages.](/assets/content/assets/en/resources/hosted/data-analysis-in-r/image.png)

```R
{r bar plot for original language with riddle codes}
ggplot(books)+
  # 'fill' is the colour of the bars - you can take another variable and add it here
  geom_bar(aes(original.language, fill = riddle.code.english))
```

> ![The same bar plot as the previous one, but now with colours indicating which genre the books are. ](/assets/content/assets/en/resources/hosted/data-analysis-in-r/image.png)

We see that the Scandi thriller trend is present; Norwegian (NO), Danish (DK), Swedish (SE) and Icelandic (IS) books are predominantly Literary Thrillers.&#x20;

If you're curious to see more visualisations of this dataset, visit [https://karinavdo.github.io/RiddleOfLiteraryQuality/](https://karinavdo.github.io/RiddleOfLiteraryQuality/) for interactive versions of the plots used in the book *The Riddle of Literary Quality: A Computational Approach*. (Van Dalen-Oskam, 2023)

## Transforming data

### Filter and select

Which of these books were translated from Italian (IT) into Dutch? We could open the big table and scroll around or sort a column to find out, but if we want to calculate something only for the Italian books, it is more efficient to filter and make a new table with the selection. In the Tidyverse:&#x20;

* Filter = selecting rows (in this case, books)
* Select = selecting columns.

```R
{r excercise 3: using filter and select}
# the %>% symbol is called a pipe - it passes on the output of one thing as the input
# of the next thing. see https://r4ds.hadley.nz/workflow-style.html#sec-pipes
# you can write the same instructions without pipes, but that is less readable and a bit more work

# change the 'IT' below to another language and rerun the code

Italian <- books%>%
   # 'is equal to' is ==
  filter(original.language == 'IT')%>%
  # Let's only check out titles and author 
  select(title, author)
 
# create a new selection by adding the column with the author's gender 
# how many books are there in your selection?

Italian
```

### Mutate

We can add columns to the table based on certain conditions that are taken from other columns. For example, let's say we want to create two new groups of books; one with a word count of 50.000 or less, which we want to call 'novella' and one for the rest, which we want to call 'novel'.

```R
{r mutate}
#creating a second table - so we are not overwriting the original
books2 <- books%>%
  # novella_novel = the new column's name
  # the ifelse has this structure(test, yes, no)
  mutate(novella_novel = ifelse(word.count < 50001, 'novella', 'novel'))

#view opens the table in a new tab - you can sort the column 'novella_novel' by 
# clicking the little arrow next to the header
view(books2)

# how many novella's are there?
summary(books2$novella_novel)
```

This gives us the following output:&#x20;

> ```
> Length     Class      Mode 
>       401 character character 
> ```

This is not yet informative.  The problem was that the new column was read as data type 'character' (you may also know that as 'string' or 'text' data). We need to factorise this column, that is, telling R to instead read it as a set of labels (called 'levels').&#x20;

```R
{r factorising a column}

# both 'novel' and 'novella' are now turned into levels of a factor

books2$novella_novel <- as.factor(books2$novella_novel)

#this line gives us the names of the levels in this column
levels(books2$novella_novel)
```

Now we get:&#x20;

> ```
> [1] "novel"   "novella"
> ```

```R
{r summary count novellas}
summary(books2$novella_novel)
#you can use summary on a table, but also on a single column
```

The summary counts the number of rows in each group:

> ```
> novel novella 
>     349      52 
> ```

For the next exercise, we will add a new column with two labels: 'non-fiction' for books whose riddle.code.english is one of three categories, and 'fiction' for all other books.

```R
{r exercise 4: mutate}

riddle.code == 'Non-fiction [and more than one essay, KvDO]' | 
riddle.code == 'Non-fiction [and too old, and collection of essays, KvDO]'  | 
riddle.code == 'Non-fiction'

# you can copy the code above 
# the '|' means 'OR'

# and make the column say 'fiction' for all other riddle.codes
# use the structure of the code in the block 'mutate', so with the ifelse(test, yes, no)


```

Once you can do this, you are a programmer ;)

### Grouping and summarising

*What is the mean sentence length for different genres of books? Maybe literary books have longer sentences?*

In order to answer this question, we need to employ two useful tricks: grouping our data by one variable (the genre), and then summarising another variable (mean sentence length) for each of the genres separately. This means we are creating a new table based on the original one.

```R
{r grouping and summarising data}

#create a new table
# the <- assigns the right part to the left part
genre_length <- books%>%
  #this is grouping by genre
   group_by(genre)%>%
  # summarise makes the new table
   summarise(mean(sentence.length.mean))

#just writing the name of the table prints it  
genre_length
```

| genre    | mean(sentence.length.mean) |
| -------- | -------------------------- |
| Fiction  | 12.21186                   |
| Other    | 11.45518                   |
| Romantic | 10.40373                   |
| Suspense | 10.53350                   |

A boxplot visualisation offers a bit more information; not just the mean, but also the distribution of all values.&#x20;

```R
{r boxplot for distribution}
ggplot(books)+geom_boxplot(aes(genre, sentence.length.mean))
```

> ![](/assets/content/assets/en/resources/hosted/data-analysis-in-r/image.png)

*Are translated books less lexically rich than Dutch books?*

For this question, we need to look at the sampled TTR = the type-token ratio. A type = unique word, token = a word's occurrence.

Although this is a different question, you can use exactly the same steps to answer it, namely grouping and summarising the data.

Can you try and write your own code?

the columns you need are called 'translated' and 'sampled.TTR'

```R
{r excercise 5: translation and TTR}
```

## Running a statistical test

A next step for both of these questions would be to run a statistical test to see if these differences in mean are significant or not. Let's find this out for the translation-lexical richness table by running an independent samples t-test. Many tests are available in base R, and others can be used through packages. The examples below are all a part of base R.

Selecting the rights test for your research question requires some knowledge of statistics - if you are new to that, [Seeing theory](https://seeing-theory.brown.edu/#firstPage) is a resource is aimed at beginners.&#x20;

In this particular case, an independent samples t-test was selected because our independent variable is a grouping variable with two groups (translated versus non-translated books). Each measurement only belongs to one of the two groups. Our dependent variable is numerical (the mean type-token ratio).&#x20;

```R
{r running a statistical test}
# independent 2-group t-test
t.test(books$sampled.TTR~books$translated) 
# where y is numeric and x is a binary factor
```

> ```R
> Welch Two Sample t-test
>
> data:  books$sampled.TTR by books$translated
> t = 2.7949, df = 253.45, p-value = 0.005589
> alternative hypothesis: true difference in means between group no and group yes is not equal to 0
> 95 percent confidence interval:
>  0.002654899 0.015322511
> sample estimates:
>  mean in group no mean in group yes 
>         0.2603875         0.2513988 
> ```

The not-translated books (called 'group no' in the output) have a significantly (p \< 0.01) higher mean TTR (0.26) than the translated books (0.25).&#x20;

Just for fun, let's have a look at the sentence length & genre question too. Instead of a t-test we can use a one way ANOVA. T-tests are suitable when there are two groups, and here there are 4 different groups (genres).

```R
{r running a one way anova test on sentence length & genre}
# Compute the analysis of variance
anova <- aov(books$sentence.length.mean ~ books$genre)
# Summary of the analysis
summary(anova)

```

> ```R
>      Df Sum Sq Mean Sq F value   Pr(>F)    
> books$genre   3  260.9   86.96   18.58 2.68e-11 ***
> Residuals   397 1857.9    4.68    
> ```

The one way ANOVA tells us that there is a significant difference between the genres for the mean sentence length, however, it does not yet tell us which of the four genres differ significantly from eachother. For this we perform a Tukey test. Looking at the 'p adj' column in the output below, can you see which genres differ from each other in a significant way? (significant = the value here should be \< 0.05)

```R
{r}
TukeyHSD(anova)
```

> ```R
>  Tukey multiple comparisons of means
>     95% family-wise confidence level
>
> Fit: aov(formula = books$sentence.length.mean ~ books$genre)
>
> $`books$genre`
>                         diff       lwr        upr     p adj
> Other-Fiction     -0.7566841 -1.925283  0.4119150 0.3406922
> Romantic-Fiction  -1.8081351 -2.793869 -0.8224009 0.0000183
> Suspense-Fiction  -1.6783662 -2.294306 -1.0624261 0.0000000
> Romantic-Other    -1.0514509 -2.434737  0.3318356 0.2046489
> Suspense-Other    -0.9216821 -2.071113  0.2277490 0.1652009
> Suspense-Romantic  0.1297689 -0.833164  1.0927018 0.9855475
>
> ```

## Exporting a markdown file

To end our exploration of R and the Riddle corpus, you can try to 'Knit' this markdown file by selecting your preferred output from the dropdown menu next to the ball of yarn in the menu bar above. Knitting only works when all code works; if you have not completed the exercises, there will be some code fragments that hinder the knitting.&#x20;

## Conclusion

After reading and working through this resource, you have hopefully gained an understanding of the quantitative data analysis workflow in R, from inspecting your raw data, to selecting and transforming it, to answering your research questions. Learning how to code for data analysis is best done through doing, and therefore I encourage you to start your own project and apply what you have learned here to your own work.&#x20;

---

## Answers to the excercises

```R
{r excercise 1}

data(respondents)
glimpse(respondents)
# or:
names(respondents)
# or:
summary(respondents)
# or:
head(respondents)

{r excercise 2}
ggplot(books)+
    geom_bar(aes(riddle.code))+
  coord_flip()

{r excercise 3}
swedish <- books%>%
  # change the 'IT' below to another language and rerun the code
  filter(original.language == 'SE')%>%
  # Let's only check out titles and author 
  # select(title, author)
  # now also add the column with the author's gender 
  select(title, author, gender.author)
swedish

{r exercise 4}
# add a new column with two labels: 'non-fiction' for books whose riddle.code is one of three categories: 

 books3 <- books2%>%
  mutate(fictionality = ifelse(riddle.code.english == 'Non-fiction [and more than one essay, KvDO]' | 
riddle.code.english == 'Non-fiction [and too old, and collection of essays, KvDO]'  | 
riddle.code.english == 'Non-fiction', 'non-fiction', 'fiction'))
#view(books3)

{r exercise 5}
trans_ttr <- books%>%
    group_by(translated)%>%
    summarise(mean(sampled.TTR))
trans_ttr

```

## Taking the next step

When you start working with your own material in Rstudio, it is highly recommended to create 'Projects'; basically a working directory that keeps your data, scripts and plots all in one place. See this excellent resource for setting up projects (and working with Rstudio in general): [https://intro2r.com/rsprojs.html](https://intro2r.com/rsprojs.html)

Then, you will need to import your data. The same resource will show you how to do that: [https://intro2r.com/importing-data.html](https://intro2r.com/importing-data.html)

If you get stuck coding, at [Stackoverflow](https://stackoverflow.com/questions) you will probably find the answer to your question, as provided by humans. You can also use Chat-GPT or other AI support, but make sure you understand and can test the solutions it offers you - as it occasionally does hallucinate and can provide working code that solves a different problem from the one you have prompted it with.&#x20;

If you are working with textual rather than numeric data, this is the parallel approach to the Tidyverse: Tidytext ([https://www.tidytextmining.com/](https://www.tidytextmining.com/) )
