---
title: Data analysis in R
locale: en
publication-date: 2025-07-08
version: 1.0.0
authors:
  - buschenhenke-floor
editors: []
contributors: []
tags:
  - data-visualisation
  - corpus-analysis
sources:
  - dariah
license: cc-by-4.0
table-of-contents: true
summary:
  content: >-
    Using the reader survey R package LitRiddle, this resource offers a gentle
    introduction to tabular data analysis in Rstudio. Following along the code
    examples, students will learn about Rstudio, Markdown files, and how to
    explore, analyse and transform quantitative data in R.
content-type: training-module
translations: []
---
## Introduction

This tutorial introduces the basic steps of quantitative data analysis in the programming language R. We will also introduce Rstudio, a free programme (IDE) in which you can create and run R scripts. The dataset we will explore comes from the Dutch National Readers' Survey, in which readers' judgements on 401 novels were captured. This dataset is wrapped in an R package called [LitRiddle](https://www.rdocumentation.org/packages/litRiddle/versions/1.0.0).

To make the most of this tutorial, I encourage you to first download R and Rstudio, and then open this file (rmd) \{add link} in Rstudio. That way, you can try out the code for yourself, do the exercises and modify the code when you take the next step of applying your new knowledge to your own data.

## Learning outcomes

After working through this course, students:

* can find their way around the base functionalities of Rstudio, including the pane layout.
* Are able to create R markdown files, understand their components, and export them.
* Can perform the basic steps of quantitative data analysis in Rstudio, making use of the Tidyverse syntax. By adjusting the code supplied, they can work on their own materials. They can import datasets, inspect their data, create a basic plot, select information, add new columns to a table, and group and summarise their data.
* Are familiar with the LitRiddle dataset, which contains Dutch readers' assessments of the (literary) quality of 400 popular Dutch and international novels.

## Tools and resources

You can download and install R and Rstudio (in that order!) from:

[https://posit.co/download/rstudio-desktop/](https://posit.co/download/rstudio-desktop/)

You can download the tutorial file from: xxx  and open it with Rstudio. The text is identical to this webpage. You can also read through the steps below, but the code samples are not executable.&#x20;

## Getting started with Rstudio & R markdown

Tutorial on Rstudio: [https://docs.posit.co/ide/user/](https://docs.posit.co/ide/user/)

Overview of the four base elements of the User Interface: [https://docs.posit.co/ide/user/ide/guide/ui/ui-panes.html](https://docs.posit.co/ide/user/ide/guide/ui/ui-panes.html)

Executing code: [https://docs.posit.co/ide/user/ide/guide/code/execution.html](https://docs.posit.co/ide/user/ide/guide/code/execution.html)

### R Markdown files

Many different types of files can be created in Rstudio, even *gasp* Python files. The handy filetype we will work with is .Rmd, an R Markdown file. Markdown files combine text and code, allowing you to integrate the code output, such as a graph or a table, with your report. The advantage here is that others can see both your analyses and the computational steps you took to create your output. Markdown files can be exported into various formats (pdf, Word, html), for easy sharing with others. Before exporting, you can also customize which parts of the document to show or keep hidden.

Let's check out some functions of a Markdown file. When you have this file open in Rstudio, you will notice at the left top the options 'Source' and 'Visual' mode. The source mode reveals the code used for text layout. The visual mode is easier to use for now.&#x20;

Then, at the right-hand side of the document, you see a menu item called 'Outline'- it is handy to keep that one active, to better navigate the file.

Under the 'Knit' menu, you will find the export options.&#x20;

You can add code blocks through the shortcut Ctrl-Alt-I or through the green square with the C.&#x20;

In this tutorial, you will find several exercises, where you are asked to adjust and write your own code. Correct answers to these exercises are to be found near the end of this document. (There are many ways to correctly solve the exercises though.)

## The Riddle project - exploring literary quality

It is time to run our first code. In the code block below, you see lines with # in front of them as well as black text. The # 'comments' a line; basically treating it like text instead of code. You can easily comment and uncomment lines through placement of the hashtags. In the .rmd file, you can run a code block through pressing the green 'play' button on the top right, or through placing your cursor somewhere in the block and pressing Ctrl-Enter. The output of your code will show up directly underneath the code block.&#x20;

```R
{r installing the packages}

# these top two lines only need to be run once, you can put a # in front of the line to 
# deactivate the code 
 # install.packages('litRiddle')
# install.packages("tidyverse")

# here the packages are loaded into your workspace. These lines need to be run every time you're
# working with these packages.

library(litRiddle)
library(tidyverse)

```

Now we have access to the dataset of the [Riddle of Literary Quality](https://literaryquality.huygens.knaw.nl/) project. This project investigated the question of literariness by examining both readerly assessments of general quality and literary quality, as well as textual characteristics, for a corpus of 401 books: both original Dutch and translated works, in several genres of fiction (romance, suspense, literary fiction and other). 13.541 respondents have shared their opinions. Together, they provided 448.055 book reviews. Allthough, due to copyright concerns, the full texts of the novels are not available, the dataset does include word frequencies for the 5000 most frequent words, for each book, unlocking stylometric analyses for this corpus.&#x20;

**A selection of publications from the Riddle-project**

Van Dalen-Oskam, K. (2023). *The Riddle of Literary Quality: A Computational Approach*. Amsterdam University Press. [https://library.oapen.org/handle/20.500.12657/63705](https://library.oapen.org/handle/20.500.12657/63705)

Corina Koolen, Karina van Dalen-Oskam, Andreas van Cranenburgh, Erica Nagelhout (2020). Literary quality in the eye of the Dutch reader: The National Reader Survey. *Poetics* 79: 101439, [https://doi.org/10.1016/j.poetic.2020.101439](https://doi.org/10.1016/j.poetic.2020.101439).

Corina Koolen (2018). *Reading beyond the female. The relationship between perception of author gender and literary quality*. [PhD thesis](http://hdl.handle.net/11245.1/cb936704-8215-4f47-9013-0d43d37f1ce7) University of Amsterdam

Andreas van Cranenburgh (2016). *Rich statistical parsing and literary language*. [PhD thesis](http://hdl.handle.net/11245/1.543163) University of Amsterdam ([revised version](http://andreasvc.github.io/phdthesis_v1.1.pdf); [errata](http://andreasvc.github.io/phderrata.txt)).

## The litRiddle package

You can read about the data of the Riddle-package by running the code block below. The introduction to the package will then open to your right side, in the 'Help' tab. Here you can find out about the three combinable tables of reader survey data, as well as some helpful code snippets to get you started with exploring this dataset. You are free to use this dataset for your own research, but please include a reference to the package. The vignette includes citation information.&#x20;

```R
 {r accessing the readme of litriddle }
vignette('litRiddle')
```

## The wonderful world of Tidyverse

The other package that is loaded is called 'Tidyverse'. It can help with all steps of data analysis, from loading and cleaning your data to visualising it in graphs and charts. If you would like to learn more about tidyverse, and the data philosophy behind it, this is the manual:

[https://r4ds.hadley.nz/](https://r4ds.hadley.nz/)

'Base' R can do lots of the things the Tidyverse can do too, but the Tidyverse functions are more intuitive and user-friendly.

Usually, the first step would be loading your data in the working directory, so that Rstudio can access it. Now, as we will work with the data from the litRiddle package, we can do this through the code below - it works a bit differently when you have your own tables to work with. The second step would be inspection and cleaning - as this data is already in mint condition, we will also skip the cleaning. So let's check out the data!

## Data inspection

```R
{r using summary and glimpse}
data(books)
# data loads the table in the working environment

# glimpse is a way to quickly see the structure of the table, it's showing column names vertically at the left side. (It transposes the data for the sake of easier reading.) 
# especially for large files, either head() or glimpse is faster than view() as the latter will open the entire table.  

glimpse(books)
```

```R
{r summarise a table }

#summary is a base R function, so you don't need special packages for this one
summary(books)
```

For less than super-tidy data, the summary would tell you how many NA's (missing values) there were, as well as if your columns are of the right data type (integer (whole number), double (number like 3.5) characters, time/date). You can also use it to check if the values are as would be expected.

The general concept of a 'tidy' table is that each row is a unique observation, and each column is a variable. This is also the case for the three tables in the Riddle package.

```R
{r tableviewing}
#head shows the first rows
head(books)
```

If you have forgotten the variable names, the code below is very convenient.

```R
{r column names}
names(books)
```

Apart from 'books', the tables 'respondents' and 'reviews' are also present. Pick one and activate it, then check the contents using one of the methods above - by writing your code in this next code block.&#x20;

```R
{r excercise 1: data loading and inspecting}

data(reviews)
head(reviews)
```

## Exploring through plots

There are translated and Dutch books in the corpus, and there is also a column indicating the original language. Let's create a plot that shows us how many books are written in each of these languages. The plot is built using 'ggplot', which is part of the tidyverse. It is highly adaptable, but we will keep it simple for now. Here is a cheatsheet with most of the plotting options: [https://github.com/rstudio/cheatsheets/blob/main/data-visualization.pdf](https://github.com/rstudio/cheatsheets/blob/main/data-visualization.pdf)

```R
{r bar plot for original language}

ggplot(books)+
  # a bar_plot counts the number of occurences
  # the structure is (aes(variable X, variable Y, other properties))
  geom_bar(aes(original.language))
```

```R
{r bar plot for original language with riddle codes}
ggplot(books)+
  # 'fill' is the colour of the bars - you can take another variable and add it here
  geom_bar(aes(original.language, fill = riddle.code.english))
```

If you're curious to see more visualisations of this dataset, visit [https://karinavdo.github.io/RiddleOfLiteraryQuality/](https://karinavdo.github.io/RiddleOfLiteraryQuality/) for interactive versions of the plots used in the book *The Riddle of Literary Quality: A Computational Approach*. (Van Dalen-Oskam, 2023)

## Transforming data

### Filter and select

Which of these books were translated from Italian (IT) into Dutch? We could open the big table and scroll around or sort a column to find out, but if we want to calculate something only for the Italian books, it is more efficient to filter and make a new table with the selection. In the Tidyverse:&#x20;

* Filter = selecting rows (in this case, books)
* Select = selecting columns.

```R
{r excercise 3: using filter and select}
# the %>% symbol is called a pipe - it passes on the output of one thing as the input
# of the next thing. see https://r4ds.hadley.nz/workflow-style.html#sec-pipes
# you can write the same instructions without pipes, but that is less readable and a bit more work

# change the 'IT' below to another language and rerun the code

Italian <- books%>%
   # 'is equal to' is ==
  filter(original.language == 'IT')%>%
  # Let's only check out titles and author 
  select(title, author)
 
# create a new selection by adding the column with the author's gender 
# how many books are there in your selection?

Italian
```

### Mutate

We can add columns to the table based on certain conditions that are taken from other columns. For example, let's say we want to create two new groups of books; one with a word count of 50.000 or less, which we want to call 'novella' and one for the rest, which we want to call 'novel'.

```R
{r mutate}
#creating a second table - so we are not overwriting the original
books2 <- books%>%
  # novella_novel = the new column's name
  # the ifelse has this structure(test, yes, no)
  mutate(novella_novel = ifelse(word.count < 50001, 'novella', 'novel'))

#view opens the table in a new tab - you can sort the column 'novella_novel' by 
# clicking the little arrow next to the header
view(books2)

# how many novella's are there?
summary(books2$novella_novel)
```

This gives us the following output:&#x20;

> ```
> Length     Class      Mode 
>       401 character character 
> ```

This is not yet informative.  The problem was that the new column was read as data type 'character' (you may also know that as 'string' or 'text' data). We need to factorise this column, that is, telling R to instead read it as a set of labels (called 'levels').&#x20;

```R
{r factorising a column}

# both 'novel' and 'novella' are now turned into levels of a factor

books2$novella_novel <- as.factor(books2$novella_novel)

#this line gives us the names of the levels in this column
levels(books2$novella_novel)
```

Now we get:&#x20;

> ```
> [1] "novel"   "novella"
> ```

```R
{r summary count novellas}
summary(books2$novella_novel)
#you can use summary on a table, but also on a single column
```

The summary counts the number of rows in each group:

> ```
> novel novella 
>     349      52 
> ```

For the next exercise, we will add a new column with two labels: non-fiction' for books whose riddle.code.english is one of three categories.

```R
{r exercise 4: mutate}

riddle.code == 'Non-fiction [and more than one essay, KvDO]' | 
riddle.code == 'Non-fiction [and too old, and collection of essays, KvDO]'  | 
riddle.code == 'Non-fiction'

# you can copy the code above 
# the '|' means 'OR'

# and make the column say 'fiction' for all other riddle.codes
# use the structure of the code in the block 'mutate', so with the ifelse(test, yes, no)


```

Once you can do this, you are a programmer ;)

### Grouping and summarising

*What is the mean sentence length for different genres of books? Maybe literary books have longer sentences?*

In order to answer this question, we need to employ two useful tricks: grouping our data by one variable (the genre), and then summarising another variable (mean sentence length) for each of the genres separately. This means we are creating a new table based on the original one.

```R
{r grouping and summarising data}

#create a new table
# the <- assigns the right part to the left part
genre_length <- books%>%
  #this is grouping by genre
   group_by(genre)%>%
  # summarise makes the new table
   summarise(mean(sentence.length.mean))

#just writing the name of the table prints it  
genre_length
```

| genre    | mean(sentence.length.mean) |
| -------- | -------------------------- |
| Fiction  | 12.21186                   |
| Other    | 11.45518                   |
| Romantic | 10.40373                   |
| Suspense | 10.53350                   |

A boxplot visualisation offers a bit more information; not just the mean, but also the distribution of all values.&#x20;

```R
{r boxplot for distribution}
ggplot(books)+geom_boxplot(aes(genre, sentence.length.mean))
```

